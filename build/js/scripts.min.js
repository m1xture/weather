const heroRef=document.querySelector(".hero"),changeImgRef=document.querySelector(".header__btn-bg"),imgsArr=["../../img/bg1.jpg","../../img/bg2.jpg","../../img/bg3.jpg"];changeImgRef.addEventListener("click",(()=>{const e=imgsArr.length-1,t=Math.round(Math.random()*(e-0)+0),r=(heroRef.style.backgroundImage,imgsArr[t]);heroRef.style.backgroundImage=`linear-gradient(\n    180deg,\n    rgba(8, 15, 26, 0.59) 0%,\n    rgba(17, 17, 46, 0.46) 100%\n  ), url(${r})`}));const unitsBtns=document.querySelector(".degrees");unitsBtns.addEventListener("click",(function(e){e.target.dataUnits}));const weatherElems={cityTextEl:document.querySelector(".location__text"),dayOfWeekEl:document.querySelector("[data-date]"),dayNumEl:document.querySelector("[date-num]"),monthTextEl:document.querySelector("[data-month]"),timeTextEl:document.querySelector("[data-time]"),currentDegree:document.querySelector("[data-degree]"),currentWeatherIcon:document.querySelector(".hero__main-weather-ico"),feelsLikeEl:document.querySelector("[data-feels-like]"),windEl:document.querySelector("[data-wind]"),humidity:document.querySelector("[data-humidity]"),firstDay:{firstDayOfWeekEl:document.querySelector("[data-first-day]"),firstDayOfWeekDegreeEl:document.querySelector("[data-first-degree]"),firstDayOfWeekIcon:""},secondDay:{secondDayOfWeekEl:document.querySelector("[data-second-day]"),secondDayOfWeekDegreeEl:document.querySelector("[data-second-degree]"),secondDayOfWeekIcon:""},thirdDay:{thirdDayOfWeekEl:document.querySelector("[data-third-day]"),thirdDayOfWeekDegreeEl:document.querySelector("[data-third-degree]"),thirdDayOfWeekIcon:""}},weatherIcons={clearSkyIco:""},DateClass=new Date,weekdayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthsNames=["January","February","March","April","May","June","July","August","September","October","November","December"],formEl=document.querySelector(".search__form"),errorTextEl=document.querySelector("[data-search-error]");let errors=0;formEl.addEventListener("submit",(function(e){e.preventDefault(),errors=0,errorTextEl.classList.add("error-hidden"),errorTextEl.textContent="",""===this.cityInput.value?(errors+=1,errorTextEl.textContent="The field is empty",errorTextEl.classList.remove("error-hidden")):this.cityInput.value.length<3||this.cityInput.value.length>25?(errors+=1,""===errorTextEl.textContent&&(errorTextEl.textContent="Type a valid city"),errorTextEl.classList.remove("error-hidden")):0===errors&&fetch(`https://api.openweathermap.org/data/2.5/weather?q=${this.cityInput.value}&appid=9a6c5b632623b9a0c279060fc1b94b4d`).then((e=>e.json())).then((function(e){console.log(e),weatherElems.cityTextEl.textContent=`${e.name}, ${e.sys.country}`,weatherElems.timeTextEl.textContent=`${DateClass.getHours()}:${DateClass.getMinutes()}`,weatherElems.dayOfWeekEl.textContent=`${weekdayNames[DateClass.getDay()]}`,weatherElems.dayNumEl.textContent=`${DateClass.getDate()}`,weatherElems.monthTextEl.textContent=`${monthsNames[DateClass.getMonth()]}`,weatherElems.currentDegree.textContent=`${Math.round(e.main.temp-273)}`,"Clear"===e.weather[0].main&&("01d"===e.weather[0].icon?weatherElems.currentWeatherIcon.src="../img/icons/sun.png":"01n"===e.weather[0].icon&&(weatherElems.currentWeatherIcon.src="../img/icons/moon.png")),"Clouds"===e.weather[0].main&&("02d"===e.weather[0].icon?weatherElems.currentWeatherIcon.src="../img/icons/cloudsSunD.png":"02n"===e.weather[0].icon?weatherElems.currentWeatherIcon.src="../img/icons/cloudsMoonN.png":"03d"===e.weather[0].icon?weatherElems.currentWeatherIcon.src="../img/icons/cloudsun.png":"03n"===e.weather[0].icon?weatherElems.currentWeatherIcon.src="../img/icons/cloudmoon.png":"03d"===e.weather[0].icon||"03n"===e.weather[0].icon?weatherElems.currentWeatherIcon.src="../img/icons/twoclouds.png":"04d"!==e.weather[0].icon&&"04n"!==e.weather[0].icon||(weatherElems.currentWeatherIcon.src="../img/icons/twoclouds.png")),"Smoke"===e.weather[0].main||"Haze"===e.weather[0].main||"Dust"===e.weather[0].main||"Fog"===e.weather[0].main||"Sand"===e.weather[0].main||"Ash"===e.weather[0].main||"Squall"===e.weather[0].main||"Tornado"===e.weather[0].main?weatherElems.currentWeatherIcon.src="../img/icons/cloudFog.png":"mist"===e.weather[0].description&&(weatherElems.currentWeatherIcon.src="../img/icons/sunFog.png"),"light snow"===e.weather[0].description||"light shower sleet"===e.weather[0].description||"light rain and snow"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/cloud1snow.png":"snow"===e.weather[0].description||"sleet"===e.weather[0].description||"shower sleet"===e.weather[0].description||"rain and snow"===e.weather[0].description||"shower snow"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/snow.png":"heavy snow"===e.weather[0].description||"heavy shower snow"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/cloudsnow.png":"light shower snow"===e.weather[0].description&&(weatherElems.currentWeatherIcon.src="../img/icons/snows.png"),"Rain"===e.weather[0].main&&("light rain"===e.weather[0].description||"moderate rain"===e.weather[0].description||"light intensity shower rain"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/lightRain.png":"shower rain"===e.weather[0].description||"ragged shower rain"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/rains.png":"heavy intensity rain"===e.weather[0].description||"freezing rain"===e.weather[0].description||"heavy intensity shower rain"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/cloudRainDeg.png":"very heavy rain"!==e.weather[0].description&&"extreme rain"!==e.weather[0].description||(weatherElems.currentWeatherIcon.src="../img/icons/cloud2rain.png")),"Drizzle"===e.weather[0].main&&(weatherElems.currentWeatherIcon.src="../img/icons/cloud90.png"),"Thunderstorm"===e.weather[0].main&&("thunderstorm with light rain"===e.weather[0].description||"thunderstorm with light drizzle"===e.weather[0].description||"thunderstorm with drizzle"===e.weather[0].description||"thunderstorm with heavy drizzle"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/drizzleThunder.png":"thunderstorm with rain"===e.weather[0].description||"thunderstorm with heavy rain"===e.weather[0].description||"heavy thunderstorm"===e.weather[0].description?weatherElems.currentWeatherIcon.src="../img/icons/cloudrainthunder.png":"thunderstorm"!==e.weather[0].description&&"light thunderstorm"!==e.weather[0].description&&"ragged thunderstorm"!==e.weather[0].description||(weatherElems.currentWeatherIcon.src="../img/icons/cloudTh.png")),weatherElems.feelsLikeEl.textContent=`${Math.round(e.main.feels_like-273)}`,weatherElems.windEl.textContent=`${Math.round(e.wind.speed)} `,weatherElems.humidity.textContent=`${Math.round(e.main.humidity)}`})).catch((function(e){console.log(e),errorTextEl.classList.remove("error-hidden"),errorTextEl.textContent="Type a valid city name"}))})),fetch("https://api.weatherapi.com/v1/forecast.json?key=76c3cf13dc02402cacd153833232809&q=London&days=4&aqi=no&alerts=no").then((e=>e.json())).then((e=>console.log(e)));